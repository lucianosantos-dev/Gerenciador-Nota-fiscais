<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Gerenciador de Notas Fiscais</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
<div class="container mt-4">

    <div th:if="${not #lists.isEmpty(notasDeAlerta)}" class="alert alert-warning" role="alert">
        <h4 class="alert-heading">Atenção!</h4>
        <p>As seguintes notas fiscais estão próximas do vencimento:</p>
        <hr>
        <ul>
            <li th:each="nota : ${notasDeAlerta}">
                <span th:text="${nota.emissor}">Emissor</span> -
                <strong>Vencimento: <span
                        th:text="${#temporals.format(nota.dataVencimento, 'dd/MM/yyyy')}">dd/MM/yyyy</span></strong> -
                Valor: R$ <span th:text="${#numbers.formatDecimal(nota.valor, 1, 'POINT', 2, 'COMMA')}">0,00</span>
            </li>
        </ul>
    </div>

    <h1>Minhas Notas Fiscais</h1>
    <hr>

    <a th:href="@{/notas/novo}" class="btn btn-primary mb-3">Adicionar Nova Nota Fiscal</a>

    <table class="table table-striped table-hover">
        <thead>
        <tr>
            <th>Vencimento</th>
            <th>Emissor</th>
            <th>Valor</th>
            <th>Status</th>
            <th>Ações</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="nota : ${notas}">
            <td th:text="${#temporals.format(nota.dataVencimento, 'dd/MM/yyyy')}"></td>
            <td th:text="${nota.emissor}"></td>
            <td th:text="${#numbers.formatDecimal(nota.valor, 1, 'POINT', 2, 'COMMA')}"></td>
            <td th:text="${nota.paga} ? 'Paga' : 'A Pagar'"></td>
            <td class="d-flex">
                <a th:href="@{/notas/editar/{numero}(numero=${nota.numero})}"
                   class="btn btn-warning btn-sm me-2">Editar</a>
                <form th:action="@{/notas/pagar/{numero}(numero=${nota.numero})}" method="post" class="me-2">
                    <button type="submit" class="btn btn-success btn-sm">Pagar</button>
                </form>
                <form th:action="@{/notas/excluir/{numero}(numero=${nota.numero})}" method="post">
                    <button type="submit" class="btn btn-danger btn-sm">Excluir</button>
                </form>
            </td>
        </tr>
        </tbody>
    </table>
</div>
</body>
</html>